# Настройка интеграции с Sendsay

## Что такое Sendsay?

Sendsay - это профессиональный российский сервис email-рассылок, который предоставляет:
- Высокую доставляемость писем
- Детальную аналитику
- Защиту от спама
- Соответствие российскому законодательству

## Как подключить Sendsay

### 1. Регистрация в Sendsay

1. Перейдите на https://app.sendsay.ru/dashboard
2. Зарегистрируйтесь или войдите в свой аккаунт
3. Подтвердите домен для отправки писем

### 2. Получение API ключа

1. В личном кабинете Sendsay перейдите в раздел "API"
2. Создайте нового пользователя с правами API
3. Сгенерируйте API ключ
4. Скопируйте ключ для использования

### 3. Настройка переменных окружения

Добавьте в файл `.env.local`:

```env
# Sendsay Configuration
SENDSAY_API_KEY=ваш_api_ключ_здесь

# Альтернативный способ (не рекомендуется)
# SENDSAY_LOGIN=ваш_логин
# SENDSAY_SUBLOGIN=ваш_сублогин
# SENDSAY_PASSWORD=ваш_пароль
```

### 4. Режимы работы

#### Режим разработки (Simulation)
- Когда API ключ не установлен
- Имитирует отправку писем
- Показывает статистику симуляции
- Безопасен для тестирования

#### Режим продакшена (Sendsay API)
- Когда API ключ установлен
- Реальная отправка через Sendsay
- Настоящая статистика
- Синхронизация подписчиков

## Функциональность

### Отправка кампаний
- Создание HTML письма
- Отправка активным подписчикам
- Логирование результатов
- Отслеживание статистики

### Управление подписчиками
- Синхронизация с Sendsay
- Добавление новых подписчиков
- Удаление неактивных
- Экспорт в CSV

### Аналитика
- Количество отправленных писем
- Открытия и клики
- Отказы и отписки
- Детальная статистика

## API Endpoints

### Отправка кампании
```
POST /api/newsletter/campaigns/[id]/send
```

### Синхронизация с Sendsay
```
POST /api/newsletter/sync-sendsay
GET /api/newsletter/sync-sendsay
```

## Безопасность

1. **Никогда не коммитьте API ключи в Git**
2. Используйте переменные окружения
3. Ограничьте права API пользователя
4. Регулярно меняйте ключи

## Тестирование

1. Сначала протестируйте в режиме симуляции
2. Добавьте тестовых подписчиков
3. Создайте тестовую кампанию
4. Проверьте логи и статистику

## Поддержка

При возникновении проблем:
1. Проверьте логи в консоли браузера
2. Убедитесь в правильности API ключа
3. Проверьте настройки домена в Sendsay
4. Обратитесь в поддержку Sendsay

## Полезные ссылки

- [Документация Sendsay API](https://docs.sendsay.ru/sendsay-api/)
- [Личный кабинет Sendsay](https://app.sendsay.ru/dashboard)
- [GitHub репозиторий Sendsay API](https://github.com/sendsay-ru/sendsay-api-js) 